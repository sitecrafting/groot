button.nav-expander{
    .button-reset();
    display: block;
    z-index: 1050;
    width: 24px;
    color: currentColor;
    transition: all @trans-speed ease-in-out;

    svg{ 
        margin: 0 0 0 auto;
        display: block; 
        width: 12px;
        height: 12px;
        path{ fill: currentColor; }
    }
    
    &[aria-expanded="true"]{
        svg{
            svg{ transform: scaleY(-1); }
        }
    }
}//button.nav-expander

ul.main-nav__menu{
    .plain-list();
    display: flex;
    gap: var(--gap, 2rem);

    > li{
        position: relative;
        > .menu-item-wrapper{
            position: relative;
            display: grid;
            grid-template-columns: 1fr auto;
            color: @black;

            > a{
                position: relative;
                display: block;
                font: 700 1rem/1.2 @font-family-headings;
                color: currentColor;
                cursor: pointer;
                &:hover{ text-decoration: none; }
            }
        }
    
        //TOP ACTIVE STYLES
        &:hover, &.current-menu-item, &.current-page-ancestor{
            > .menu-item-wrapper{ color: @blue; }
        }
    }
}


ul.main-nav__second{
    .plain-list();
    display: none;

    > li{
		display: block;
		> .menu-item-wrapper{
            display: grid;
            grid-template-columns: 1fr auto;
            > a{
                position: relative;
                display: block;
                font: 700 (14/16rem)/1.2 @font-family-headings;
                color: @black;
    
                &:hover{ color: @blue; text-decoration: none; }
            }
        } 
	}
}

ul.main-nav__third{
    .plain-list();
    display: none;
}

//DESKTOP MENU VIEW
@media @desktop-menu{
    ul.main-nav__menu{
        align-items: center;
		> li{

            > .menu-item-wrapper{
                padding: 10px 0;
                > a{ padding: 15px 0; }
            }
            
            &:hover{
                .main-nav__second{
                    display: block;
                    opacity: 1;
                }
            }
            &:last-child,
            &:nth-last-child(2) {
                .main-nav__second{
                    left: auto;
                    right: 0;
                }
            }
        }
    }
    ul.main-nav__second{
        outline: 1px solid red;
        position: absolute;
        top: 100%;
        left: 0;
        width: 240px;
        padding: 10px;
        background: @white;
        opacity: 0;
        transition: display @trans-speed allow-discrete, opacity @trans-speed ease-in-out;
        z-index: 1060;

        .nav-expander{ display: none; }

        > li{
            > div > a{
                padding: 10px;
                &:hover{ background-color: @gray-f3; }
            }
        }
    }

    @starting-style{
        ul.main-nav__menu > li:hover{
            .main-nav__second{
                opacity: 0;
            }
        }
    }
}

//MOBILE MENU VIEW
@media @mobile-menu{

    .main-nav{
        padding: 120px 0;
        position: absolute;
        inset: 0 0 0 auto;
        width: 0;
        overflow: clip;
        background: @white;
        transition: width 350ms ease-out;
        z-index: 9998;

        &[data-visible="true"]{
            width: 400px;
        }

    }
    ul.main-nav__menu{
        width: 400px;
        padding: 0 25px;
        flex-direction: column;
        --gap: 1rem;

        > li{
            &.menu-item-has-children{
				> div > a{ margin-right: 35px; }
			}//end &.menu-item-has-children
            &.nav-search-button button{
                display: grid;
                gap: 8px;
                grid-template-columns: auto 1fr;
                align-items: center;
            }
        }

    }

    ul.main-nav__second{
        //initial hide
        display: none;
        height: 0;
        overflow: hidden;
        transition: height 300ms ease-in-out;

        > li{
            > div > a{
                padding: 10px 0;
            }
            &.menu-item-has-children{
				> div > a{ margin-right: 35px; }
            }
        }

        &[data-visible="true"]{
            display: block;
            height: auto;
        }
    }

    //only shows on mobile
    ul.main-nav__third{
        .plain-list();
        padding-left: 15px;
        border-left: 2px solid @blue;

        //initial hide
        display: none;
        height: 0;
        overflow: hidden;
        transition: height 300ms ease-in-out;

        &[data-visible="true"]{
            display: block;
            height: auto;
        }

        > li{
            a{
                display: block;
                font: 700 (14/16rem)/1.2 @font-family-headings;
                padding: 5px 10px;
                color: @black;
            }
        }
    }
}

@media only screen and (max-width: 28.4375em){
    .main-nav[data-visible="true"],
    ul.main-nav__menu{
        width: 100vw;
    }
}